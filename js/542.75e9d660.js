"use strict";(self["webpackChunkintervals"]=self["webpackChunkintervals"]||[]).push([[542],{3776:(e,t,a)=>{a.d(t,{Z:()=>u});var l=a(284);const o=new l.Z("e-conta"),i=async e=>await o.collection(e).orderBy("name").get({keys:!0}),n=async(e,t)=>await o.collection(e).doc(t).get(),s=async(e,t)=>await o.collection(e).add({...t}),c=async(e,t,a)=>await o.collection(e).doc(t).update({...a}),d=async(e,t)=>await o.collection(e).doc(t).delete(),u=()=>({db:o,listar:i,buscar:n,adicionar:s,atualizar:c,excluir:d})},3558:(e,t,a)=>{a.d(t,{Z:()=>c});a(5363);const l=e=>e?(e=parseFloat(e).toFixed(2),e=e.toString(),"R$ "+e.replace(".",",")):"0,00",o=(e,t,a=2)=>0===t?100:(e/t*100).toFixed(a),i=e=>e?(e=parseFloat(e).toFixed(2),e=e.toString(),e.replace(".",",")):"0,00",n=e=>e?e?new Date(e).toLocaleDateString():null:"",s=e=>e?e.replace("-","/").replace("-","/"):"",c=()=>({currency:l,percent:o,monetize:i,isData:n,replData:s})},2703:(e,t,a)=>{a.d(t,{v:()=>s});var l=a(321),o=a(3776);const i="expense",{listar:n}=(0,o.Z)(),s=(0,l.Q_)("conta",{state:()=>({list:[]}),actions:{async listConta(){const e=await n(i);this.list=e.map((e=>({...e.data,id:e.key})))},async getByCategoria(e){const t=await n(i),a=t.filter((t=>t.data.category===e));this.list=a.map((e=>({...e.data,id:e.key})))},setConta(e){this.list=e},addConta(e){this.list.push(e)},dropConta(e){const t=this.list.indexOf(e);this.list.splice(t,1)}},getters:{leanList:e=>e.list.map((e=>e.name)),totalList:e=>{const t=e.list.map((e=>parseFloat(e.amount)*e.quantity));if(t.length>0){const e=t.reduce(((e,t)=>e+t));return e.toFixed(2)||0}return 0},badgeCount:e=>e.list.length}})},6542:(e,t,a)=>{a.r(t),a.d(t,{default:()=>L});var l=a(3673),o=a(2323);const i=e=>((0,l.dD)("data-v-6b129ae2"),e=e(),(0,l.Cn)(),e),n={class:"q-pa-md",style:{}},s=i((()=>(0,l._)("div",{style:{height:"100px"}},null,-1))),c=i((()=>(0,l._)("span",{class:"q-ml-sm"},"Deseja excluir este item?",-1)));function d(e,t,a,i,d,u){const r=(0,l.up)("q-icon"),m=(0,l.up)("q-avatar"),p=(0,l.up)("q-input"),v=(0,l.up)("q-select"),w=(0,l.up)("q-item-label"),g=(0,l.up)("q-item-section"),f=(0,l.up)("q-badge"),y=(0,l.up)("q-btn"),h=(0,l.up)("q-item"),Z=(0,l.up)("q-separator"),C=(0,l.up)("q-list"),x=(0,l.up)("q-card-section"),q=(0,l.up)("q-card-actions"),W=(0,l.up)("q-card"),_=(0,l.up)("q-dialog"),b=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(p,{outlined:"",label:"Buscar...",modelValue:e.expenseName,"onUpdate:modelValue":t[0]||(t[0]=t=>e.expenseName=t),modelModifiers:{trim:!0},class:"q-pa-md"},{append:(0,l.w5)((()=>[(0,l.Wm)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(r,{name:"search"})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(v,{outlined:"",modelValue:e.model,"onUpdate:modelValue":t[1]||(t[1]=t=>e.model=t),options:e.options,label:"Categoria",class:"q-pa-md"},null,8,["modelValue","options"]),(0,l._)("div",n,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.expenses,(t=>((0,l.wg)(),(0,l.j4)(C,{key:t.id},{default:(0,l.w5)((()=>[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Produto: "+(0,o.zw)(t.name),1)])),_:2},1024),(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l.Uk)("Valor: R$ "+(0,o.zw)(e.setMonetize(t.amount)),1)])),_:2},1024),(0,l.Wm)(w,{caption:"",lines:"2"},{default:(0,l.w5)((()=>[(0,l.Uk)("Quantidade: "+(0,o.zw)(t.quantity),1)])),_:2},1024)])),_:2},1024),(0,l.Wm)(g,{side:""},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{color:e.setColor(t.quantity,t.amount),rounded:""},null,8,["color"])])),_:2},1024),(0,l.Wm)(g,{avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(y,{icon:"tune","no-caps":"",outline:"",onClick:a=>e.show(null,t)},null,8,["onClick"])])),_:2},1024)])),_:2},1024),(0,l.Wm)(Z,{spaced:"",inset:""})])),_:2},1024)))),128)),s,(0,l.Wm)(_,{modelValue:e.confirm,"onUpdate:modelValue":t[3]||(t[3]=t=>e.confirm=t),persistent:""},{default:(0,l.w5)((()=>[(0,l.Wm)(W,null,{default:(0,l.w5)((()=>[(0,l.Wm)(x,{class:"row items-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{icon:"delete",color:"negative","text-color":"white"}),c])),_:1}),(0,l.Wm)(q,{align:"right"},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(y,{flat:"",label:"Cancelar",color:"dark"},null,512),[[b]]),(0,l.wy)((0,l.Wm)(y,{flat:"",label:"Excluir",color:"negative",onClick:t[2]||(t[2]=t=>e.deleteExpense())},null,512),[[b]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])],64)}var u=a(8825),r=a(1959),m=a(9582),p=a(3558),v=a(3776),w=a(2703);const g=(0,l.aZ)({setup(){const e=(0,u.Z)(),t=(0,m.tv)(),{monetize:a}=(0,p.Z)(),{excluir:o}=(0,v.Z)(),i=(0,w.v)(),n=(0,r.iH)([]),s=(0,r.iH)(),c="expense",d=(0,r.iH)({}),g=(0,r.iH)(!1),f=(0,r.iH)("Todos"),y=async()=>{try{await i.listConta(),n.value=i.list}catch(t){e.notify({message:t,color:"negative",icon:"close"})}},h=(a=!1,l)=>{e.bottomSheet({message:"Selecione uma opção",grid:a,actions:[{label:"Editar",icon:"edit",color:"positive",size:"sm",id:"edit",item:l},{label:"Deletar",icon:"delete",color:"negative",id:"delete",item:l}]}).onOk((e=>{"delete"===e.id&&e.item.id?(d.value=e.item,Z()):"edit"===e.id&&e.item.id&&t.push({name:"editar",params:{id:e.item.id}})})).onCancel((()=>{})).onDismiss((()=>{}))},Z=()=>{g.value=!0},C=()=>{const{id:t}=d.value;o(c,t).then((()=>{e.notify({message:"Produto excluida com sucesso!",color:"positive",icon:"delete"}),y()})).catch((t=>{e.notify({message:t,color:"negative",icon:"close"})}))},x=e=>a(e),q=()=>{setTimeout((()=>{const e=n.value.filter((e=>e.name.startsWith(s.value)));n.value=e}),500)},W=(e,t)=>0!==e&&t>0?"positive":"negative";return(0,l.m0)((async()=>{s.value&&q()})),(0,l.YP)(f,(async e=>{"Todos"!==e?(await i.getByCategoria(e),n.value=i.list):y()})),(0,l.bv)((()=>{y()})),{expenses:n,expenseName:s,collection:c,expense:d,confirm:g,getExpenses:y,show:h,modalActive:Z,deleteExpense:C,setMonetize:x,setColor:W,model:f,options:["Acougue","Alimentos","Cerveja","Limpeza","Sacolao","Outros","Todos"]}}});var f=a(4260),y=a(4842),h=a(5096),Z=a(4554),C=a(9396),x=a(7011),q=a(3414),W=a(2035),_=a(2350),b=a(9721),Q=a(8240),k=a(5869),D=a(6778),z=a(151),S=a(5589),V=a(9367),F=a(677),H=a(7518),B=a.n(H);const I=(0,f.Z)(g,[["render",d],["__scopeId","data-v-6b129ae2"]]),L=I;B()(g,"components",{QInput:y.Z,QAvatar:h.Z,QIcon:Z.Z,QSelect:C.Z,QList:x.Z,QItem:q.Z,QItemSection:W.Z,QItemLabel:_.Z,QBadge:b.Z,QBtn:Q.Z,QSeparator:k.Z,QDialog:D.Z,QCard:z.Z,QCardSection:S.Z,QCardActions:V.Z}),B()(g,"directives",{ClosePopup:F.Z})}}]);